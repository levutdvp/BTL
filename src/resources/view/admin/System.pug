
//- doctype html
//- head
//-   meta(charset='utf-8')
//-   meta(http-equiv='X-UA-Compatible' content='IE=edge')
//-   // Tell the browser to be responsive to screen width
//-   meta(name='viewport' content='width=device-width, initial-scale=1')
//-   meta(name='keywords' content='wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Ample lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Ample admin lite dashboard bootstrap 5 dashboard template')
//-   meta(name='description' content='Ample Admin Lite is powerful and clean admin dashboard template, inpired from Bootstrap Framework')
//-   meta(name='robots' content='noindex,nofollow')
//-   title Ample Admin Lite Template by WrapPixel
//-   link(rel='canonical' href='')
//-   // Favicon icon
//-   link(rel='icon' type='image/png' sizes='16x16' href='')
//-   // Custom CSS
//-   link(href='/css/style.min.css' rel='stylesheet')
//-   link(rel="stylesheet", href="/css/c.css/style.css")
//-   //- link(rel="stylesheet", href="/css/c.css/style.css")
extends ../main
block content 

  .preloader
    .lds-ripple
      .lds-pos
      .lds-pos


  #main-wrapper(data-layout='vertical' data-navbarbg='skin5' data-sidebartype='full' data-sidebar-position='absolute' data-header-position='absolute' data-boxed-layout='full')

    header.topbar(data-navbarbg='skin5')
      nav.navbar.top-navbar.navbar-expand-md.navbar-dark
        .navbar-header(data-logobg='skin6')
        
          a.navbar-brand(href='/')
            //- b.logo-icon
            //-   img(src='/Bootstrap_plugins_admin/images/logo-icon.png' alt='homepage')
            span.logo-text
              img(src='/Bootstrap_plugins_admin/images/logo-text.png' alt='homepage')
        
          a.nav-toggler.waves-effect.waves-light.text-dark.d-block.d-md-none(href='javascript:void(0)')
            i.ti-menu.ti-close
      
        #navbarSupportedContent.navbar-collapse.collapse(data-navbarbg='skin5')
          ul.navbar-nav.d-none.d-md-block.d-lg-none
            li.nav-item
              a.nav-toggler.nav-link.waves-effect.waves-light.text-white(href='javascript:void(0)')
                i.ti-menu.ti-close
          ul.navbar-nav.ms-auto.d-flex.align-items-center
            // ==============================================================
            // Search
            // ==============================================================
            li.in
              form.app-search.d-none.d-md-block.me-3(role='search')
                input.form-control.mt-0(type='text' placeholder='Search...')
                a.active(href='')
                  i.fa.fa-search
          
            li
              a.profile-pic(href='/admin/profine')
                img.img-circle(src=`${user.img}` alt='user-img' width='36')
                span.text-white.font-medium= user.username
          
    aside.left-sidebar(data-sidebarbg='skin6')
      // Sidebar scroll
      .scroll-sidebar
        // Sidebar navigation
        nav.sidebar-nav
          ul#sidebarnav
            // User Profile
            li.sidebar-item.pt-2
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/dashboard' aria-expanded='false')
                i.far.fa-clock(aria-hidden='true')
                span.hide-menu Dashboard
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/profine' aria-expanded='false')
                i.fa.fa-user(aria-hidden='true')
                span.hide-menu Profile
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/manager-users' aria-expanded='false')
                i.fa-solid.fa-people-roof
                span.hide-menu Manager User
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='' aria-expanded='false')
                i.fa-solid.fa-comments
                span.hide-menu Manager Commemt
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='' aria-expanded='false')
                i.fa-solid.fa-list-check
                span.hide-menu Manager Posts
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/CreateCoures' aria-expanded='false')
                i.fa-solid.fa-square-plus
                span.hide-menu CreateCoures
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/ManagerCoures' aria-expanded='false')
                i.fa-solid.fa-list-check
                span.hide-menu Manager Coures
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='404.html' aria-expanded='false')
                i.fa.fa-info-circle(aria-hidden='true')
                span.hide-menu Error 404
            li.sidebar-item
              a.sidebar-link.waves-effect.waves-dark.sidebar-link(href='/admin/system' aria-expanded='false')
                i.fa-sharp.fa-solid.fa-gear
                span.hide-menu System


    .page-wrapper
      .page-breadcrumb.bg-white
        .row.align-items-center
          .col-lg-3.col-md-4.col-sm-4.col-xs-12
            h4.page-title Danh sách admin
          .col-lg-9.col-sm-8.col-md-8.col-xs-12
            .d-md-flex
              ol.breadcrumb.ms-auto
                li
                  a.fw-normal(href='#') Dashboard
              a.btn.btn-danger.d-none.d-md-block.pull-right.ms-3.hidden-xs.hidden-sm.waves-effect.waves-light.text-white(href='https://www.wrappixel.com/templates/ampleadmin/' target='_blank')
                | Upgrade
                | to Pro
          a(href="/admin/system/create_admin") thêm mới 
          table.table.mt-3.Table_Manager_admin
            thead.thead-dark
                tr
                    th(scope='col') STT
                    th(scope='col') ID
                    th(scope='col') name
                    th(scope='col') email
                    th(scope='col') action
            tbody
                each Users in users
                    if(Users.role==="admin")
                        tr
                            th(scope='row') 1
                            td=Users._id
                            td=Users.username
                            td=Users.email
                            td
                                a(href=`/admin/system/edit/${Users.id}`) 
                                    button.btn_update_main.btn.btn-primary
                                        | Sửa 
                                button.btn.btn-danger(type='button' data-id=`${Users.id}` data-toggle='modal' data-target='#exampleModal')
                                  | Xóa
                            #exampleModal.modal.fade(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
                                  .modal-dialog(role='document')
                                      .modal-content
                                        .modal-header
                                            h5#exampleModalLabel.modal-title Modal title
                                            button.close(type='button' data-dismiss='modal' aria-label='Close')
                                              span(aria-hidden='true') ×
                                        .modal-body
                                            | Bạn chắc chắn muốn xóa user này !!
                                        .modal-footer
                                            button.btn.btn-secondary(type='button' data-dismiss='modal') Close
                                            button.btn_delete_User_admin.btn.btn-danger(type='button') Xóa
    script.
      window.addEventListener('DOMContentLoaded',()=>{
        let Id ;
        $('#exampleModal').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget) 
          var id = button.data('id') 
          Id = id
        })
        const btn_delete_User_admin = document.querySelector('.btn_delete_User_admin')
        btn_delete_User_admin.addEventListener('click',async  ()=>{
          try{
            const res= await axios({
              method:'delete',
              url:`/api/v1/user/${Id}`,
            })
            if(res.data.status=="success"){
              window.location.assign("/admin/system")
            }
          }catch(err){
            console.log(err)
          }
        })
      })
                    
        

  script(src='/Bootstrap_plugins_admin/bower_components/jquery/dist/jquery.min.js')
  script(src='/bootstrap/dist/js/bootstrap.bundle.min.js')
  script(src='/js/js_admin/app-style-switcher.js')
  script(src='/js/js_admin/waves.js')
  script(src='/js/js_admin/sidebarmenu.js')
  script(src='/js/js_admin/custom.js')
  script(src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js") 
